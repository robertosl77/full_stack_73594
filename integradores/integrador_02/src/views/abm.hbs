{{!-- src/views/abmProductos.hbs --}}
<div class="container mt-4">
    <h2 class="mb-4">Gestión de Productos</h2>

    <table class="table table-hover table-striped align-middle">
        <thead>
            <tr>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Bodega</th>
                <th>Tipo</th>
                <th>Categoría</th>
                <th>Precio</th>
                <th>Descuento</th>
                <th>Stock</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {{#each productos}}
            <tr>
                <td><img src="/{{imagen}}" alt="{{nombre}}" style="height: 50px;"></td>
                <td>{{nombre}}</td>
                <td>{{bodega}}</td>
                <td>{{tipo}}</td>
                <td>{{categoria}}</td>
                <td>${{precio_original}}</td>
                <td>{{descuento}}%</td>
                <td>{{stock}}</td>
                <td>
                    {{#if estado}}
                        <span class="badge bg-success">Activo</span>
                    {{else}}
                        <span class="badge bg-secondary">Inactivo</span>
                    {{/if}}
                </td>
                <td>
                    <div class="btn-group">
                        {{#if estado}}
                        <form action="{{../basedir}}/admin/productos/{{_id}}/deshabilitar" method="POST" style="display:inline;">
                            <button class="btn btn-warning btn-sm">Deshabilitar</button>
                        </form>
                        {{else}}
                        <form action="{{../basedir}}/admin/productos/{{_id}}/habilitar" method="POST" style="display:inline;">
                            <button class="btn btn-success btn-sm">Habilitar</button>
                        </form>
                        {{/if}}

                        <button class="btn btn-primary btn-sm ms-1 btn-editar-descuento" data-id="{{_id}}" data-descuento="{{descuento}}">Descuento</button>
                        <button class="btn btn-info btn-sm ms-1 btn-editar-stock" data-id="{{_id}}" data-stock="{{stock}}">Stock</button>
                        <button class="btn btn-secondary btn-sm ms-1 btn-editar-precio" data-id="{{_id}}" data-precio="{{precio_original}}">Precio</button>
                    </div>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>
